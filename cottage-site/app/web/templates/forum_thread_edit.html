{% extends "base.html" %}
{% block content %}
<section class="container mx-auto px-4 py-12 max-w-3xl" x-data="{ body: '' }" x-init="body = $refs.ta.value">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-semibold">Edit Thread</h1>
    <a href="/forum/thread/{{ thread.id }}" class="px-3 py-1.5 rounded-md border border-slate-700 bg-slate-800 text-slate-100 hover:bg-slate-700">Back</a>
  </div>

  <form method="post" action="/forum/thread/{{ thread.id }}/edit" class="space-y-5">
    <div>
      <label class="block text-sm text-slate-300 mb-1">Title</label>
      <input name="title" type="text" required value="{{ thread.title }}" class="w-full px-3 py-2 bg-slate-900 border border-slate-700 text-slate-100 placeholder-slate-400 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" />
    </div>

    <div>
      <div class="flex items-center justify-between">
        <label class="block text-sm text-slate-300 mb-1">Body</label>
        <a class="text-xs text-indigo-400 hover:text-indigo-300" href="https://www.markdownguide.org/cheat-sheet/" target="_blank">Markdown help</a>
      </div>
      <textarea name="body" rows="12" required x-model="body" x-ref="ta" class="w-full px-3 py-2 bg-slate-900 border border-slate-700 text-slate-100 placeholder-slate-400 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500">{{ thread.body }}</textarea>
    </div>

    <div class="flex items-center gap-3">
      <a href="/forum/thread/{{ thread.id }}" class="px-4 py-2 rounded-md border border-slate-700 bg-slate-800 text-slate-100 hover:bg-slate-700">Cancel</a>
      <button type="submit" class="px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700">Save</button>
    </div>
  </form>

  <div class="mt-10">
    <h2 class="text-lg font-medium mb-3">Live preview</h2>
    <div class="p-4 rounded-md bg-slate-800 border border-slate-700">
      <article class="prose prose-invert max-w-none" x-html="window.__md.render(body)"></article>
    </div>
  </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"></script>
<script>
  window.__md = window.markdownit();
</script>
{% endblock %}
