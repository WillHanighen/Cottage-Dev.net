{% extends "base.html" %}
{% block content %}
<section class="container mx-auto px-4 py-8">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-semibold">Forum</h1>
    {% if request.state.user %}
    <a href="/forum/new" class="px-3 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700">New Thread</a>
    {% else %}
    <a href="/login?next=/forum/new" class="px-3 py-2 rounded-md border border-slate-700 bg-slate-800 text-slate-100 hover:bg-slate-700">Sign in to post</a>
    {% endif %}
  </div>

  <div class="grid md:grid-cols-3 gap-6">
    <div class="md:col-span-2 space-y-3" id="threads" hx-get="/forum/threads{% if cat %}?cat={{ cat }}{% endif %}" hx-trigger="load" hx-target="#threads">
      <!-- Thread list will load here via HTMX -->
      <div class="p-4 bg-slate-800 border border-slate-700 rounded-md text-slate-400">No threads yet. Be the first to post.</div>
    </div>
    <aside class="space-y-3">
      <div class="p-4 bg-slate-800 border border-slate-700 rounded-md">
        <h2 class="font-medium mb-2">Categories</h2>
        <ul class="space-y-1 text-sm text-slate-300">
          <li>
            <a class="hover:text-indigo-400 {% if not cat %}text-indigo-400{% endif %}" href="/forum">All</a>
          </li>
          {% for c in categories or [] %}
          <li>
            <a class="hover:text-indigo-400 {% if cat == c.slug %}text-indigo-400{% endif %}" href="/forum?cat={{ c.slug }}">{{ c.name }}</a>
          </li>
          {% endfor %}
        </ul>
      </div>
      <div class="p-4 bg-slate-800 border border-slate-700 rounded-md">
        <h2 class="font-medium mb-2">Hot Threads</h2>
        <ul class="space-y-1 text-sm text-slate-300">
          <li><a class="hover:text-indigo-400" href="#">Coming soonâ€¦</a></li>
        </ul>
      </div>
    </aside>
  </div>
</section>
{% endblock %}
